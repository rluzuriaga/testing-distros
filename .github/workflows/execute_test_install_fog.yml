name: Execute - Test Install FOG

on:
  repository_dispatch:
    types: [fog-install-test]

defaults:
  run:
    shell: bash

permissions: 
  contents: write

jobs:
  ubuntu-22-04:
    runs-on: ubuntu-22.04
    steps:
      - name: Run Ubuntu 22.04
        run: |
          curl -L \
          -X POST \
          -H "Accept: application/vnd.github+json" \
          -H "Authorization: Bearer ${{ secrets.GITHUB_TOKEN }}" \
          -H "X-GitHub-Api-Version: 2022-11-28" \
          https://api.github.com/repos/rluzuriaga/testing-distros/dispatches \
          -d '{"event_type":"run-distros"}'

  # ubuntu-24-04:
  #   runs-on: ubuntu-22.04
  #   steps:
  #     - name: Run Ubuntu 24.04
  #       run: |
  #         curl -X POST \
  #         -H "Accept: application/vnd.github.v3+json" \
  #         -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
  #         https://api.github.com/repos/testing-distros/actions/workflows/Ubuntu_24_04.yml/dispatches \
  #         -d '{"ref":"main"}'
  
  # debian-12:
  #   runs-on: ubuntu-22.04
  #   steps:
  #     - name: Run Debian 12
  #       run: |
  #         curl -X POST \
  #         -H "Accept: application/vnd.github.v3+json" \
  #         -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
  #         https://api.github.com/repos/testing-distros/actions/workflows/Debian_12.yml/dispatches \
  #         -d '{"ref":"main"}'
  
  # fedora-40:
  #   runs-on: ubuntu-22.04
  #   steps:
  #     - name: Run Fedora 40
  #       run: |
  #         curl -X POST \
  #         -H "Accept: application/vnd.github.v3+json" \
  #         -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
  #         https://api.github.com/repos/testing-distros/actions/workflows/Fedora_40.yml/dispatches \
  #         -d '{"ref":"main"}'

  # check-status:
  #   needs: [ubuntu-22-04, ubuntu-24-04, debian-12, fedora-40]

  #   runs-on: ubuntu-22.04
    
  #   steps:
  #     - name: Set status badges
  #       if: always()
  #       run: |
